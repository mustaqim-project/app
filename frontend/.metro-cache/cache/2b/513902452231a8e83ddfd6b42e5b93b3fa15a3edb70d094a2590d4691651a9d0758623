{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":54,"index":203}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUserId = await AsyncStorage.default.getItem('user_id');\n        if (storedToken && storedUserId) {\n          setToken(storedToken);\n          await refreshUser();\n        }\n      } catch (error) {\n        console.error('Load auth error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await _servicesApi.profileAPI.getMyProfile();\n        setUser(response.data);\n      } catch (error) {\n        console.error('Refresh user error:', error);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _servicesApi.authAPI.login({\n          email,\n          password\n        });\n        const {\n          token: newToken,\n          user_id,\n          verified_face,\n          assessments_completed,\n          readiness\n        } = response.data;\n        await AsyncStorage.default.setItem('token', newToken);\n        await AsyncStorage.default.setItem('user_id', user_id);\n        setToken(newToken);\n        await refreshUser();\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const response = await _servicesApi.authAPI.register(data);\n        const {\n          token: newToken,\n          user_id\n        } = response.data;\n        await AsyncStorage.default.setItem('token', newToken);\n        await AsyncStorage.default.setItem('user_id', user_id);\n        setToken(newToken);\n        await refreshUser();\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user_id');\n      setToken(null);\n      setUser(null);\n    };\n    const updateUser = userData => {\n      if (user) {\n        setUser({\n          ...user,\n          ...userData\n        });\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        updateUser,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":137,"map":[[13,2,27,0,"Object"],[13,8,27,0],[13,9,27,0,"defineProperty"],[13,23,27,0],[13,24,27,0,"exports"],[13,31,27,0],[14,4,27,0,"enumerable"],[14,14,27,0],[15,4,27,0,"get"],[15,7,27,0],[15,18,27,0,"get"],[15,19,27,0],[16,6,27,0],[16,13,27,0,"AuthProvider"],[16,25,27,0],[17,4,27,0],[18,2,27,0],[19,2,122,0,"Object"],[19,8,122,0],[19,9,122,0,"defineProperty"],[19,23,122,0],[19,24,122,0,"exports"],[19,31,122,0],[20,4,122,0,"enumerable"],[20,14,122,0],[21,4,122,0,"get"],[21,7,122,0],[21,18,122,0,"get"],[21,19,122,0],[22,6,122,0],[22,13,122,0,"useAuth"],[22,20,122,0],[23,4,122,0],[24,2,122,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_servicesApi"],[28,18,3,0],[28,21,3,0,"require"],[28,28,3,0],[28,29,3,0,"_dependencyMap"],[28,43,3,0],[29,2,3,54],[29,6,3,54,"_reactJsxDevRuntime"],[29,25,3,54],[29,28,3,54,"require"],[29,35,3,54],[29,36,3,54,"_dependencyMap"],[29,50,3,54],[30,2,25,0],[30,8,25,6,"AuthContext"],[30,19,25,17],[30,35,25,20],[30,39,25,20,"createContext"],[30,45,25,33],[30,46,25,33,"createContext"],[30,59,25,33],[30,61,25,63,"undefined"],[30,70,25,72],[30,71,25,73],[31,2,27,7],[31,8,27,13,"AuthProvider"],[31,20,27,66],[31,23,27,69,"AuthProvider"],[31,24,27,70],[32,4,27,72,"children"],[33,2,27,81],[33,3,27,82],[33,8,27,87],[34,4,28,2],[34,10,28,8],[34,11,28,9,"user"],[34,15,28,13],[34,17,28,15,"setUser"],[34,24,28,22],[34,25,28,23],[34,28,28,26],[34,32,28,26,"useState"],[34,38,28,34],[34,39,28,34,"useState"],[34,47,28,34],[34,49,28,48],[34,53,28,52],[34,54,28,53],[35,4,29,2],[35,10,29,8],[35,11,29,9,"token"],[35,16,29,14],[35,18,29,16,"setToken"],[35,26,29,24],[35,27,29,25],[35,30,29,28],[35,34,29,28,"useState"],[35,40,29,36],[35,41,29,36,"useState"],[35,49,29,36],[35,51,29,52],[35,55,29,56],[35,56,29,57],[36,4,30,2],[36,10,30,8],[36,11,30,9,"loading"],[36,18,30,16],[36,20,30,18,"setLoading"],[36,30,30,28],[36,31,30,29],[36,34,30,32],[36,38,30,32,"useState"],[36,44,30,40],[36,45,30,40,"useState"],[36,53,30,40],[36,55,30,41],[36,59,30,45],[36,60,30,46],[37,4,32,2],[37,8,32,2,"useEffect"],[37,14,32,11],[37,15,32,11,"useEffect"],[37,24,32,11],[37,26,32,12],[37,32,32,18],[38,6,33,4,"loadStoredAuth"],[38,20,33,18],[38,21,33,19],[38,22,33,20],[39,4,34,2],[39,5,34,3],[39,7,34,5],[39,9,34,7],[39,10,34,8],[40,4,36,2],[40,10,36,8,"loadStoredAuth"],[40,24,36,22],[40,27,36,25],[40,33,36,25,"loadStoredAuth"],[40,34,36,25],[40,39,36,37],[41,6,37,4],[41,10,37,8],[42,8,38,6],[42,14,38,12,"storedToken"],[42,25,38,23],[42,28,38,26],[42,34,38,32,"AsyncStorage"],[42,46,38,44],[42,47,38,44,"default"],[42,54,38,44],[42,55,38,45,"getItem"],[42,62,38,52],[42,63,38,53],[42,70,38,60],[42,71,38,61],[43,8,39,6],[43,14,39,12,"storedUserId"],[43,26,39,24],[43,29,39,27],[43,35,39,33,"AsyncStorage"],[43,47,39,45],[43,48,39,45,"default"],[43,55,39,45],[43,56,39,46,"getItem"],[43,63,39,53],[43,64,39,54],[43,73,39,63],[43,74,39,64],[44,8,41,6],[44,12,41,10,"storedToken"],[44,23,41,21],[44,27,41,25,"storedUserId"],[44,39,41,37],[44,41,41,39],[45,10,42,8,"setToken"],[45,18,42,16],[45,19,42,17,"storedToken"],[45,30,42,28],[45,31,42,29],[46,10,43,8],[46,16,43,14,"refreshUser"],[46,27,43,25],[46,28,43,26],[46,29,43,27],[47,8,44,6],[48,6,45,4],[48,7,45,5],[48,8,45,6],[48,15,45,13,"error"],[48,20,45,18],[48,22,45,20],[49,8,46,6,"console"],[49,15,46,13],[49,16,46,14,"error"],[49,21,46,19],[49,22,46,20],[49,40,46,38],[49,42,46,40,"error"],[49,47,46,45],[49,48,46,46],[50,6,47,4],[50,7,47,5],[50,16,47,14],[51,8,48,6,"setLoading"],[51,18,48,16],[51,19,48,17],[51,24,48,22],[51,25,48,23],[52,6,49,4],[53,4,50,2],[53,5,50,3],[54,4,52,2],[54,10,52,8,"refreshUser"],[54,21,52,19],[54,24,52,22],[54,30,52,22,"refreshUser"],[54,31,52,22],[54,36,52,34],[55,6,53,4],[55,10,53,8],[56,8,54,6],[56,14,54,12,"response"],[56,22,54,20],[56,25,54,23],[56,31,54,29,"profileAPI"],[56,43,54,39],[56,44,54,39,"profileAPI"],[56,54,54,39],[56,55,54,40,"getMyProfile"],[56,67,54,52],[56,68,54,53],[56,69,54,54],[57,8,55,6,"setUser"],[57,15,55,13],[57,16,55,14,"response"],[57,24,55,22],[57,25,55,23,"data"],[57,29,55,27],[57,30,55,28],[58,6,56,4],[58,7,56,5],[58,8,56,6],[58,15,56,13,"error"],[58,20,56,18],[58,22,56,20],[59,8,57,6,"console"],[59,15,57,13],[59,16,57,14,"error"],[59,21,57,19],[59,22,57,20],[59,43,57,41],[59,45,57,43,"error"],[59,50,57,48],[59,51,57,49],[60,6,58,4],[61,4,59,2],[61,5,59,3],[62,4,61,2],[62,10,61,8,"login"],[62,15,61,13],[62,18,61,16],[62,24,61,16,"login"],[62,25,61,23,"email"],[62,30,61,36],[62,32,61,38,"password"],[62,40,61,54],[62,45,61,59],[63,6,62,4],[63,10,62,8],[64,8,63,6],[64,14,63,12,"response"],[64,22,63,20],[64,25,63,23],[64,31,63,29,"authAPI"],[64,43,63,36],[64,44,63,36,"authAPI"],[64,51,63,36],[64,52,63,37,"login"],[64,57,63,42],[64,58,63,43],[65,10,63,45,"email"],[65,15,63,50],[66,10,63,52,"password"],[67,8,63,61],[67,9,63,62],[67,10,63,63],[68,8,64,6],[68,14,64,12],[69,10,64,14,"token"],[69,15,64,19],[69,17,64,21,"newToken"],[69,25,64,29],[70,10,64,31,"user_id"],[70,17,64,38],[71,10,64,40,"verified_face"],[71,23,64,53],[72,10,64,55,"assessments_completed"],[72,31,64,76],[73,10,64,78,"readiness"],[74,8,64,88],[74,9,64,89],[74,12,64,92,"response"],[74,20,64,100],[74,21,64,101,"data"],[74,25,64,105],[75,8,66,6],[75,14,66,12,"AsyncStorage"],[75,26,66,24],[75,27,66,24,"default"],[75,34,66,24],[75,35,66,25,"setItem"],[75,42,66,32],[75,43,66,33],[75,50,66,40],[75,52,66,42,"newToken"],[75,60,66,50],[75,61,66,51],[76,8,67,6],[76,14,67,12,"AsyncStorage"],[76,26,67,24],[76,27,67,24,"default"],[76,34,67,24],[76,35,67,25,"setItem"],[76,42,67,32],[76,43,67,33],[76,52,67,42],[76,54,67,44,"user_id"],[76,61,67,51],[76,62,67,52],[77,8,69,6,"setToken"],[77,16,69,14],[77,17,69,15,"newToken"],[77,25,69,23],[77,26,69,24],[78,8,70,6],[78,14,70,12,"refreshUser"],[78,25,70,23],[78,26,70,24],[78,27,70,25],[79,6,71,4],[79,7,71,5],[79,8,71,6],[79,15,71,13,"error"],[79,20,71,23],[79,22,71,25],[80,8,72,6],[80,14,72,12],[80,18,72,16,"Error"],[80,23,72,21],[80,24,72,22,"error"],[80,29,72,27],[80,30,72,28,"response"],[80,38,72,36],[80,40,72,38,"data"],[80,44,72,42],[80,46,72,44,"detail"],[80,52,72,50],[80,56,72,54],[80,70,72,68],[80,71,72,69],[81,6,73,4],[82,4,74,2],[82,5,74,3],[83,4,76,2],[83,10,76,8,"register"],[83,18,76,16],[83,21,76,19],[83,27,76,26,"data"],[83,31,76,35],[83,35,76,40],[84,6,77,4],[84,10,77,8],[85,8,78,6],[85,14,78,12,"response"],[85,22,78,20],[85,25,78,23],[85,31,78,29,"authAPI"],[85,43,78,36],[85,44,78,36,"authAPI"],[85,51,78,36],[85,52,78,37,"register"],[85,60,78,45],[85,61,78,46,"data"],[85,65,78,50],[85,66,78,51],[86,8,79,6],[86,14,79,12],[87,10,79,14,"token"],[87,15,79,19],[87,17,79,21,"newToken"],[87,25,79,29],[88,10,79,31,"user_id"],[89,8,79,39],[89,9,79,40],[89,12,79,43,"response"],[89,20,79,51],[89,21,79,52,"data"],[89,25,79,56],[90,8,81,6],[90,14,81,12,"AsyncStorage"],[90,26,81,24],[90,27,81,24,"default"],[90,34,81,24],[90,35,81,25,"setItem"],[90,42,81,32],[90,43,81,33],[90,50,81,40],[90,52,81,42,"newToken"],[90,60,81,50],[90,61,81,51],[91,8,82,6],[91,14,82,12,"AsyncStorage"],[91,26,82,24],[91,27,82,24,"default"],[91,34,82,24],[91,35,82,25,"setItem"],[91,42,82,32],[91,43,82,33],[91,52,82,42],[91,54,82,44,"user_id"],[91,61,82,51],[91,62,82,52],[92,8,84,6,"setToken"],[92,16,84,14],[92,17,84,15,"newToken"],[92,25,84,23],[92,26,84,24],[93,8,85,6],[93,14,85,12,"refreshUser"],[93,25,85,23],[93,26,85,24],[93,27,85,25],[94,6,86,4],[94,7,86,5],[94,8,86,6],[94,15,86,13,"error"],[94,20,86,23],[94,22,86,25],[95,8,87,6],[95,14,87,12],[95,18,87,16,"Error"],[95,23,87,21],[95,24,87,22,"error"],[95,29,87,27],[95,30,87,28,"response"],[95,38,87,36],[95,40,87,38,"data"],[95,44,87,42],[95,46,87,44,"detail"],[95,52,87,50],[95,56,87,54],[95,77,87,75],[95,78,87,76],[96,6,88,4],[97,4,89,2],[97,5,89,3],[98,4,91,2],[98,10,91,8,"logout"],[98,16,91,14],[98,19,91,17],[98,25,91,17,"logout"],[98,26,91,17],[98,31,91,29],[99,6,92,4],[99,12,92,10,"AsyncStorage"],[99,24,92,22],[99,25,92,22,"default"],[99,32,92,22],[99,33,92,23,"removeItem"],[99,43,92,33],[99,44,92,34],[99,51,92,41],[99,52,92,42],[100,6,93,4],[100,12,93,10,"AsyncStorage"],[100,24,93,22],[100,25,93,22,"default"],[100,32,93,22],[100,33,93,23,"removeItem"],[100,43,93,33],[100,44,93,34],[100,53,93,43],[100,54,93,44],[101,6,94,4,"setToken"],[101,14,94,12],[101,15,94,13],[101,19,94,17],[101,20,94,18],[102,6,95,4,"setUser"],[102,13,95,11],[102,14,95,12],[102,18,95,16],[102,19,95,17],[103,4,96,2],[103,5,96,3],[104,4,98,2],[104,10,98,8,"updateUser"],[104,20,98,18],[104,23,98,22,"userData"],[104,31,98,45],[104,35,98,50],[105,6,99,4],[105,10,99,8,"user"],[105,14,99,12],[105,16,99,14],[106,8,100,6,"setUser"],[106,15,100,13],[106,16,100,14],[107,10,100,16],[107,13,100,19,"user"],[107,17,100,23],[108,10,100,25],[108,13,100,28,"userData"],[109,8,100,37],[109,9,100,38],[109,10,100,39],[110,6,101,4],[111,4,102,2],[111,5,102,3],[112,4,104,2],[112,24,105,4],[112,28,105,4,"_reactJsxDevRuntime"],[112,47,105,4],[112,48,105,4,"jsxDEV"],[112,54,105,4],[112,56,105,5,"AuthContext"],[112,67,105,16],[112,68,105,17,"Provider"],[112,76,105,25],[113,6,106,6,"value"],[113,11,106,11],[113,13,106,13],[114,8,107,8,"user"],[114,12,107,12],[115,8,108,8,"token"],[115,13,108,13],[116,8,109,8,"loading"],[116,15,109,15],[117,8,110,8,"login"],[117,13,110,13],[118,8,111,8,"register"],[118,16,111,16],[119,8,112,8,"logout"],[119,14,112,14],[120,8,113,8,"updateUser"],[120,18,113,18],[121,8,114,8,"refreshUser"],[122,6,115,6],[122,7,115,8],[123,6,115,8,"children"],[123,14,115,8],[123,16,117,7,"children"],[124,4,117,15],[125,6,117,15,"fileName"],[125,14,117,15],[125,16,117,15,"_jsxFileName"],[125,28,117,15],[126,6,117,15,"lineNumber"],[126,16,117,15],[127,6,117,15,"columnNumber"],[127,18,117,15],[128,4,117,15],[128,11,118,26],[128,12,118,27],[129,2,120,0],[129,3,120,1],[130,2,122,7],[130,8,122,13,"useAuth"],[130,15,122,20],[130,18,122,23,"useAuth"],[130,19,122,23],[130,24,122,29],[131,4,123,2],[131,10,123,8,"context"],[131,17,123,15],[131,20,123,18],[131,24,123,18,"useContext"],[131,30,123,28],[131,31,123,28,"useContext"],[131,41,123,28],[131,43,123,29,"AuthContext"],[131,54,123,40],[131,55,123,41],[132,4,124,2],[132,8,124,6],[132,9,124,7,"context"],[132,16,124,14],[132,18,124,16],[133,6,125,4],[133,12,125,10],[133,16,125,14,"Error"],[133,21,125,19],[133,22,125,20],[133,64,125,62],[133,65,125,63],[134,4,126,2],[135,4,127,2],[135,11,127,9,"context"],[135,18,127,16],[136,2,128,0],[136,3,128,1],[137,0,128,2],[137,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","refreshUser","login","register","logout","updateUser","useAuth"],"mappings":"AAA;qEC0B;YCK;GDE;yBEE;GFc;sBGE;GHO;gBIE;GJa;mBKE;GLa;iBME;GNK;qBOE;GPI;CDkB;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}