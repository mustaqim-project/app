{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":54,"index":203}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUserId = await AsyncStorage.default.getItem('user_id');\n        if (storedToken && storedUserId) {\n          setToken(storedToken);\n          await refreshUser();\n        }\n      } catch (error) {\n        console.error('Load auth error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await _servicesApi.profileAPI.getMyProfile();\n        setUser(response.data);\n      } catch (error) {\n        console.error('Refresh user error:', error);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _servicesApi.authAPI.login({\n          email,\n          password\n        });\n        const {\n          token: newToken,\n          user_id,\n          verified_face,\n          assessments_completed,\n          readiness\n        } = response.data;\n        await AsyncStorage.default.setItem('token', newToken);\n        await AsyncStorage.default.setItem('user_id', user_id);\n        setToken(newToken);\n        await refreshUser();\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const response = await _servicesApi.authAPI.register(data);\n        const {\n          token: newToken,\n          user_id\n        } = response.data;\n        await AsyncStorage.default.setItem('token', newToken);\n        await AsyncStorage.default.setItem('user_id', user_id);\n        setToken(newToken);\n        await refreshUser();\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user_id');\n      setToken(null);\n      setUser(null);\n    };\n    const updateUser = userData => {\n      if (user) {\n        setUser(Object.assign({}, user, userData));\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        register,\n        logout,\n        updateUser,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":143,"map":[[15,2,27,0,"Object"],[15,8,27,0],[15,9,27,0,"defineProperty"],[15,23,27,0],[15,24,27,0,"exports"],[15,31,27,0],[16,4,27,0,"enumerable"],[16,14,27,0],[17,4,27,0,"get"],[17,7,27,0],[17,18,27,0,"get"],[17,19,27,0],[18,6,27,0],[18,13,27,0,"AuthProvider"],[18,25,27,0],[19,4,27,0],[20,2,27,0],[21,2,122,0,"Object"],[21,8,122,0],[21,9,122,0,"defineProperty"],[21,23,122,0],[21,24,122,0,"exports"],[21,31,122,0],[22,4,122,0,"enumerable"],[22,14,122,0],[23,4,122,0,"get"],[23,7,122,0],[23,18,122,0,"get"],[23,19,122,0],[24,6,122,0],[24,13,122,0,"useAuth"],[24,20,122,0],[25,4,122,0],[26,2,122,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_servicesApi"],[30,18,3,0],[30,21,3,0,"require"],[30,28,3,0],[30,29,3,0,"_dependencyMap"],[30,43,3,0],[31,2,3,54],[31,6,3,54,"_reactJsxDevRuntime"],[31,25,3,54],[31,28,3,54,"require"],[31,35,3,54],[31,36,3,54,"_dependencyMap"],[31,50,3,54],[32,2,25,0],[32,8,25,6,"AuthContext"],[32,19,25,17],[32,35,25,20],[32,39,25,20,"createContext"],[32,45,25,33],[32,46,25,33,"createContext"],[32,59,25,33],[32,61,25,63,"undefined"],[32,70,25,72],[32,71,25,73],[33,2,27,7],[33,8,27,13,"AuthProvider"],[33,20,27,66],[33,23,27,69,"AuthProvider"],[33,24,27,70],[34,4,27,72,"children"],[35,2,27,81],[35,3,27,82],[35,8,27,87],[36,4,27,87,"_s"],[36,6,27,87],[37,4,28,2],[37,10,28,8],[37,11,28,9,"user"],[37,15,28,13],[37,17,28,15,"setUser"],[37,24,28,22],[37,25,28,23],[37,28,28,26],[37,32,28,26,"useState"],[37,38,28,34],[37,39,28,34,"useState"],[37,47,28,34],[37,49,28,48],[37,53,28,52],[37,54,28,53],[38,4,29,2],[38,10,29,8],[38,11,29,9,"token"],[38,16,29,14],[38,18,29,16,"setToken"],[38,26,29,24],[38,27,29,25],[38,30,29,28],[38,34,29,28,"useState"],[38,40,29,36],[38,41,29,36,"useState"],[38,49,29,36],[38,51,29,52],[38,55,29,56],[38,56,29,57],[39,4,30,2],[39,10,30,8],[39,11,30,9,"loading"],[39,18,30,16],[39,20,30,18,"setLoading"],[39,30,30,28],[39,31,30,29],[39,34,30,32],[39,38,30,32,"useState"],[39,44,30,40],[39,45,30,40,"useState"],[39,53,30,40],[39,55,30,41],[39,59,30,45],[39,60,30,46],[40,4,32,2],[40,8,32,2,"useEffect"],[40,14,32,11],[40,15,32,11,"useEffect"],[40,24,32,11],[40,26,32,12],[40,32,32,18],[41,6,33,4,"loadStoredAuth"],[41,20,33,18],[41,21,33,19],[41,22,33,20],[42,4,34,2],[42,5,34,3],[42,7,34,5],[42,9,34,7],[42,10,34,8],[43,4,36,2],[43,10,36,8,"loadStoredAuth"],[43,24,36,22],[43,27,36,25],[43,33,36,25,"loadStoredAuth"],[43,34,36,25],[43,39,36,37],[44,6,37,4],[44,10,37,8],[45,8,38,6],[45,14,38,12,"storedToken"],[45,25,38,23],[45,28,38,26],[45,34,38,32,"AsyncStorage"],[45,46,38,44],[45,47,38,44,"default"],[45,54,38,44],[45,55,38,45,"getItem"],[45,62,38,52],[45,63,38,53],[45,70,38,60],[45,71,38,61],[46,8,39,6],[46,14,39,12,"storedUserId"],[46,26,39,24],[46,29,39,27],[46,35,39,33,"AsyncStorage"],[46,47,39,45],[46,48,39,45,"default"],[46,55,39,45],[46,56,39,46,"getItem"],[46,63,39,53],[46,64,39,54],[46,73,39,63],[46,74,39,64],[47,8,41,6],[47,12,41,10,"storedToken"],[47,23,41,21],[47,27,41,25,"storedUserId"],[47,39,41,37],[47,41,41,39],[48,10,42,8,"setToken"],[48,18,42,16],[48,19,42,17,"storedToken"],[48,30,42,28],[48,31,42,29],[49,10,43,8],[49,16,43,14,"refreshUser"],[49,27,43,25],[49,28,43,26],[49,29,43,27],[50,8,44,6],[51,6,45,4],[51,7,45,5],[51,8,45,6],[51,15,45,13,"error"],[51,20,45,18],[51,22,45,20],[52,8,46,6,"console"],[52,15,46,13],[52,16,46,14,"error"],[52,21,46,19],[52,22,46,20],[52,40,46,38],[52,42,46,40,"error"],[52,47,46,45],[52,48,46,46],[53,6,47,4],[53,7,47,5],[53,16,47,14],[54,8,48,6,"setLoading"],[54,18,48,16],[54,19,48,17],[54,24,48,22],[54,25,48,23],[55,6,49,4],[56,4,50,2],[56,5,50,3],[57,4,52,2],[57,10,52,8,"refreshUser"],[57,21,52,19],[57,24,52,22],[57,30,52,22,"refreshUser"],[57,31,52,22],[57,36,52,34],[58,6,53,4],[58,10,53,8],[59,8,54,6],[59,14,54,12,"response"],[59,22,54,20],[59,25,54,23],[59,31,54,29,"profileAPI"],[59,43,54,39],[59,44,54,39,"profileAPI"],[59,54,54,39],[59,55,54,40,"getMyProfile"],[59,67,54,52],[59,68,54,53],[59,69,54,54],[60,8,55,6,"setUser"],[60,15,55,13],[60,16,55,14,"response"],[60,24,55,22],[60,25,55,23,"data"],[60,29,55,27],[60,30,55,28],[61,6,56,4],[61,7,56,5],[61,8,56,6],[61,15,56,13,"error"],[61,20,56,18],[61,22,56,20],[62,8,57,6,"console"],[62,15,57,13],[62,16,57,14,"error"],[62,21,57,19],[62,22,57,20],[62,43,57,41],[62,45,57,43,"error"],[62,50,57,48],[62,51,57,49],[63,6,58,4],[64,4,59,2],[64,5,59,3],[65,4,61,2],[65,10,61,8,"login"],[65,15,61,13],[65,18,61,16],[65,24,61,16,"login"],[65,25,61,23,"email"],[65,30,61,36],[65,32,61,38,"password"],[65,40,61,54],[65,45,61,59],[66,6,62,4],[66,10,62,8],[67,8,63,6],[67,14,63,12,"response"],[67,22,63,20],[67,25,63,23],[67,31,63,29,"authAPI"],[67,43,63,36],[67,44,63,36,"authAPI"],[67,51,63,36],[67,52,63,37,"login"],[67,57,63,42],[67,58,63,43],[68,10,63,45,"email"],[68,15,63,50],[69,10,63,52,"password"],[70,8,63,61],[70,9,63,62],[70,10,63,63],[71,8,64,6],[71,14,64,12],[72,10,64,14,"token"],[72,15,64,19],[72,17,64,21,"newToken"],[72,25,64,29],[73,10,64,31,"user_id"],[73,17,64,38],[74,10,64,40,"verified_face"],[74,23,64,53],[75,10,64,55,"assessments_completed"],[75,31,64,76],[76,10,64,78,"readiness"],[77,8,64,88],[77,9,64,89],[77,12,64,92,"response"],[77,20,64,100],[77,21,64,101,"data"],[77,25,64,105],[78,8,66,6],[78,14,66,12,"AsyncStorage"],[78,26,66,24],[78,27,66,24,"default"],[78,34,66,24],[78,35,66,25,"setItem"],[78,42,66,32],[78,43,66,33],[78,50,66,40],[78,52,66,42,"newToken"],[78,60,66,50],[78,61,66,51],[79,8,67,6],[79,14,67,12,"AsyncStorage"],[79,26,67,24],[79,27,67,24,"default"],[79,34,67,24],[79,35,67,25,"setItem"],[79,42,67,32],[79,43,67,33],[79,52,67,42],[79,54,67,44,"user_id"],[79,61,67,51],[79,62,67,52],[80,8,69,6,"setToken"],[80,16,69,14],[80,17,69,15,"newToken"],[80,25,69,23],[80,26,69,24],[81,8,70,6],[81,14,70,12,"refreshUser"],[81,25,70,23],[81,26,70,24],[81,27,70,25],[82,6,71,4],[82,7,71,5],[82,8,71,6],[82,15,71,13,"error"],[82,20,71,23],[82,22,71,25],[83,8,72,6],[83,14,72,12],[83,18,72,16,"Error"],[83,23,72,21],[83,24,72,22,"error"],[83,29,72,27],[83,30,72,28,"response"],[83,38,72,36],[83,40,72,38,"data"],[83,44,72,42],[83,46,72,44,"detail"],[83,52,72,50],[83,56,72,54],[83,70,72,68],[83,71,72,69],[84,6,73,4],[85,4,74,2],[85,5,74,3],[86,4,76,2],[86,10,76,8,"register"],[86,18,76,16],[86,21,76,19],[86,27,76,26,"data"],[86,31,76,35],[86,35,76,40],[87,6,77,4],[87,10,77,8],[88,8,78,6],[88,14,78,12,"response"],[88,22,78,20],[88,25,78,23],[88,31,78,29,"authAPI"],[88,43,78,36],[88,44,78,36,"authAPI"],[88,51,78,36],[88,52,78,37,"register"],[88,60,78,45],[88,61,78,46,"data"],[88,65,78,50],[88,66,78,51],[89,8,79,6],[89,14,79,12],[90,10,79,14,"token"],[90,15,79,19],[90,17,79,21,"newToken"],[90,25,79,29],[91,10,79,31,"user_id"],[92,8,79,39],[92,9,79,40],[92,12,79,43,"response"],[92,20,79,51],[92,21,79,52,"data"],[92,25,79,56],[93,8,81,6],[93,14,81,12,"AsyncStorage"],[93,26,81,24],[93,27,81,24,"default"],[93,34,81,24],[93,35,81,25,"setItem"],[93,42,81,32],[93,43,81,33],[93,50,81,40],[93,52,81,42,"newToken"],[93,60,81,50],[93,61,81,51],[94,8,82,6],[94,14,82,12,"AsyncStorage"],[94,26,82,24],[94,27,82,24,"default"],[94,34,82,24],[94,35,82,25,"setItem"],[94,42,82,32],[94,43,82,33],[94,52,82,42],[94,54,82,44,"user_id"],[94,61,82,51],[94,62,82,52],[95,8,84,6,"setToken"],[95,16,84,14],[95,17,84,15,"newToken"],[95,25,84,23],[95,26,84,24],[96,8,85,6],[96,14,85,12,"refreshUser"],[96,25,85,23],[96,26,85,24],[96,27,85,25],[97,6,86,4],[97,7,86,5],[97,8,86,6],[97,15,86,13,"error"],[97,20,86,23],[97,22,86,25],[98,8,87,6],[98,14,87,12],[98,18,87,16,"Error"],[98,23,87,21],[98,24,87,22,"error"],[98,29,87,27],[98,30,87,28,"response"],[98,38,87,36],[98,40,87,38,"data"],[98,44,87,42],[98,46,87,44,"detail"],[98,52,87,50],[98,56,87,54],[98,77,87,75],[98,78,87,76],[99,6,88,4],[100,4,89,2],[100,5,89,3],[101,4,91,2],[101,10,91,8,"logout"],[101,16,91,14],[101,19,91,17],[101,25,91,17,"logout"],[101,26,91,17],[101,31,91,29],[102,6,92,4],[102,12,92,10,"AsyncStorage"],[102,24,92,22],[102,25,92,22,"default"],[102,32,92,22],[102,33,92,23,"removeItem"],[102,43,92,33],[102,44,92,34],[102,51,92,41],[102,52,92,42],[103,6,93,4],[103,12,93,10,"AsyncStorage"],[103,24,93,22],[103,25,93,22,"default"],[103,32,93,22],[103,33,93,23,"removeItem"],[103,43,93,33],[103,44,93,34],[103,53,93,43],[103,54,93,44],[104,6,94,4,"setToken"],[104,14,94,12],[104,15,94,13],[104,19,94,17],[104,20,94,18],[105,6,95,4,"setUser"],[105,13,95,11],[105,14,95,12],[105,18,95,16],[105,19,95,17],[106,4,96,2],[106,5,96,3],[107,4,98,2],[107,10,98,8,"updateUser"],[107,20,98,18],[107,23,98,22,"userData"],[107,31,98,45],[107,35,98,50],[108,6,99,4],[108,10,99,8,"user"],[108,14,99,12],[108,16,99,14],[109,8,100,6,"setUser"],[109,15,100,13],[109,16,100,13,"Object"],[109,22,100,13],[109,23,100,13,"assign"],[109,29,100,13],[109,34,100,19,"user"],[109,38,100,23],[109,40,100,28,"userData"],[109,48,100,36],[109,49,100,38],[109,50,100,39],[110,6,101,4],[111,4,102,2],[111,5,102,3],[112,4,104,2],[112,24,105,4],[112,28,105,4,"_reactJsxDevRuntime"],[112,47,105,4],[112,48,105,4,"jsxDEV"],[112,54,105,4],[112,56,105,5,"AuthContext"],[112,67,105,16],[112,68,105,17,"Provider"],[112,76,105,25],[113,6,106,6,"value"],[113,11,106,11],[113,13,106,13],[114,8,107,8,"user"],[114,12,107,12],[115,8,108,8,"token"],[115,13,108,13],[116,8,109,8,"loading"],[116,15,109,15],[117,8,110,8,"login"],[117,13,110,13],[118,8,111,8,"register"],[118,16,111,16],[119,8,112,8,"logout"],[119,14,112,14],[120,8,113,8,"updateUser"],[120,18,113,18],[121,8,114,8,"refreshUser"],[122,6,115,6],[122,7,115,8],[123,6,115,8,"children"],[123,14,115,8],[123,16,117,7,"children"],[124,4,117,15],[125,6,117,15,"fileName"],[125,14,117,15],[125,16,117,15,"_jsxFileName"],[125,28,117,15],[126,6,117,15,"lineNumber"],[126,16,117,15],[127,6,117,15,"columnNumber"],[127,18,117,15],[128,4,117,15],[128,11,118,26],[128,12,118,27],[129,2,120,0],[129,3,120,1],[130,2,120,2,"_s"],[130,4,120,2],[130,5,27,13,"AuthProvider"],[130,17,27,66],[131,2,27,66,"_c"],[131,4,27,66],[131,7,27,13,"AuthProvider"],[131,19,27,66],[132,2,122,7],[132,8,122,13,"useAuth"],[132,15,122,20],[132,18,122,23,"useAuth"],[132,19,122,23],[132,24,122,29],[133,4,122,29,"_s2"],[133,7,122,29],[134,4,123,2],[134,10,123,8,"context"],[134,17,123,15],[134,20,123,18],[134,24,123,18,"useContext"],[134,30,123,28],[134,31,123,28,"useContext"],[134,41,123,28],[134,43,123,29,"AuthContext"],[134,54,123,40],[134,55,123,41],[135,4,124,2],[135,8,124,6],[135,9,124,7,"context"],[135,16,124,14],[135,18,124,16],[136,6,125,4],[136,12,125,10],[136,16,125,14,"Error"],[136,21,125,19],[136,22,125,20],[136,64,125,62],[136,65,125,63],[137,4,126,2],[138,4,127,2],[138,11,127,9,"context"],[138,18,127,16],[139,2,128,0],[139,3,128,1],[140,2,128,2,"_s2"],[140,5,128,2],[140,6,122,13,"useAuth"],[140,13,122,20],[141,2,122,20],[141,6,122,20,"_c"],[141,8,122,20],[142,2,122,20,"$RefreshReg$"],[142,14,122,20],[142,15,122,20,"_c"],[142,17,122,20],[143,0,122,20],[143,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","refreshUser","login","register","logout","updateUser","useAuth"],"mappings":"AAA;qEC0B;YCK;GDE;yBEE;GFc;sBGE;GHO;gBIE;GJa;mBKE;GLa;iBME;GNK;qBOE;GPI;CDkB;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}